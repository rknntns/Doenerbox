<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Döner Bestellung</title>
</head>
<body>

<h1>Döner Bestellung</h1>

<form id="orderForm">
    <label for="doener">Döner:</label>
    <select id="doener" name="doener"></select>

    <h3>Zutaten:</h3>

    <label for="salate">Salate:</label>
    <select id="salate" name="salate" multiple>
        <option value="Tomate">Tomate</option>
        <option value="Zwiebeln">Zwiebeln</option>
        <option value="Gurke">Gurke</option>
        <option value="Kopfsalat">Kopfsalat</option>
        <option value="Gemüse">Gemüse</option>
    </select>

    <label for="saucen">Saucen:</label>
    <select id="saucen" name="saucen" multiple>
        <option value="Kräuter">Kräuter</option>
        <option value="Knoblauch">Knoblauch</option>
        <option value="Scharf">Scharf</option>
    </select>

    <label for="vegan">Vegan:</label>
    <input type="checkbox" id="vegan" name="vegan">

    <label for="mitKaese">Mit Käse:</label>
    <input type="checkbox" id="mitKaese" name="mitKaese">

    <br>

    <button type="button" onclick="submitOrder()">Bestellen</button>
</form>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // Lade Döner-Optionen vom Server
    fetch('http://127.0.0.1:5000/doener')
        .then(response => response.json())
        .then(data => {
            const doenerSelect = document.getElementById('doener');
            data.forEach(doener => {
                const option = document.createElement('option');
                option.value = doener.name;
                option.text = doener.name + ' - ' + doener.preis + ' €';
                doenerSelect.appendChild(option);
            });
        });
});

function submitOrder() {
    const doener = document.getElementById('doener').value;
    const salate = Array.from(document.getElementById('salate').selectedOptions, option => option.value);
    const saucen = Array.from(document.getElementById('saucen').selectedOptions, option => option.value);
    const vegan = document.getElementById('vegan').checked;
    const mitKaese = document.getElementById('mitKaese').checked;

    // Hier kannst du die Bestellung an den Server senden (z.B. mit Fetch-API)
    // Beachte, dass dies nur ein Beispiel ist und angepasst werden muss, um mit deiner Server-API zu interagieren.
    fetch('http://127.0.0.1:5000/bestellung', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            doener: doener,
            salate: salate,
            saucen: saucen,
            vegan: vegan,
            mitKaese: mitKaese,
        }),
    })
    .then(response => response.json())
    .then(data => {
        alert('Bestellung erfolgreich! ' + JSON.stringify(data));
    })
    .catch(error => {
        console.error('Fehler beim Senden der Bestellung:', error);
    });
}
</script>

</body>
</html>
